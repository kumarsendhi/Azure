
<!-- saved from url=(0115)https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<meta name="Generator" content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Gadugi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#5B9BD5;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#2E74B5;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:10.0pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Comment Text Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#4472C4;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#4472C4;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#4472C4;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:28.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#4472C4;
	letter-spacing:-.5pt;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-link:"Plain Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:Consolas;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Comment Subject Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#2E74B5;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Segoe UI",sans-serif;
	color:#5B9BD5;
	font-weight:bold;}
span.CommentTextChar
	{mso-style-name:"Comment Text Char";
	mso-style-link:"Comment Text";
	font-family:"Gadugi",sans-serif;
	color:#262626;}
span.CommentSubjectChar
	{mso-style-name:"Comment Subject Char";
	mso-style-link:"Comment Subject";
	font-family:"Gadugi",sans-serif;
	color:#262626;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Segoe UI",sans-serif;
	color:#2E74B5;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Calibri Light",sans-serif;
	color:#4472C4;
	letter-spacing:-.5pt;}
p.Note, li.Note, div.Note
	{mso-style-name:Note;
	mso-style-link:"Note Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.NoteCxSpFirst, li.NoteCxSpFirst, div.NoteCxSpFirst
	{mso-style-name:NoteCxSpFirst;
	mso-style-link:"Note Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.NoteCxSpMiddle, li.NoteCxSpMiddle, div.NoteCxSpMiddle
	{mso-style-name:NoteCxSpMiddle;
	mso-style-link:"Note Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.NoteCxSpLast, li.NoteCxSpLast, div.NoteCxSpLast
	{mso-style-name:NoteCxSpLast;
	mso-style-link:"Note Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
span.NoteChar
	{mso-style-name:"Note Char";
	mso-style-link:Note;
	font-family:"Gadugi",sans-serif;
	color:#262626;
	background:#F2F2F2;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-link:"Plain Text";
	font-family:Consolas;}
p.CodeBlock, li.CodeBlock, div.CodeBlock
	{mso-style-name:"Code Block";
	mso-style-link:"Code Block Char";
	margin-top:8.0pt;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpFirst, li.CodeBlockCxSpFirst, div.CodeBlockCxSpFirst
	{mso-style-name:"Code BlockCxSpFirst";
	mso-style-link:"Code Block Char";
	margin-top:8.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpMiddle, li.CodeBlockCxSpMiddle, div.CodeBlockCxSpMiddle
	{mso-style-name:"Code BlockCxSpMiddle";
	mso-style-link:"Code Block Char";
	margin:0in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpLast, li.CodeBlockCxSpLast, div.CodeBlockCxSpLast
	{mso-style-name:"Code BlockCxSpLast";
	mso-style-link:"Code Block Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
span.CodeBlockChar
	{mso-style-name:"Code Block Char";
	mso-style-link:"Code Block";
	font-family:Consolas;
	color:#262626;
	background:#F2F2F2;}
span.ListParagraphChar
	{mso-style-name:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	mso-style-link:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1";
	font-family:"Segoe UI",sans-serif;
	color:black;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:.5in .5in .5in .5in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang="EN-US" link="#0563C1" vlink="#954F72">

<div class="WordSection1">

<h1><a name="_Toc452065389">Chef Deployment on Microsoft Azure</a></h1>

<p class="MsoNormal">&nbsp;</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0" width="720" style="width:7.5in;border-collapse:collapse">
 <tbody><tr>
  <td width="720" valign="top" style="width:7.5in;border:solid white 1.0pt;
  border-bottom:solid white 3.0pt;background:#00ABEB;padding:.75pt 5.4pt 0in 5.4pt">
  <p class="MsoNormal">Conditions and Terms of Use</p>
  </td>
 </tr>
 <tr>
  <td width="720" valign="top" style="width:7.5in;border:solid white 1.0pt;
  border-top:none;background:#CBE2F7;padding:.75pt 5.4pt 0in 5.4pt">
  <p class="MsoNormal">This training package is proprietary and confidential.&nbsp;
  Duplicating, reselling and/or distribution of course materials in their
  entirety or in part is not permitted without the expressed prior written
  consent of Opsgility, LLC.&nbsp; The contents of this package are for
  informational and training purposes only and are provided "as is"
  without warranty of any kind, whether express or implied, including but not
  limited to the implied warranties of merchantability, fitness for a
  particular purpose, and non-infringement.</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">Training package content, including URLs and other
  Internet Web site references, is subject to change without notice. Because
  Opsgility must respond to changing market conditions, the content should not
  be interpreted to be a commitment on the part of Opsgility, and Opsgility
  does not guarantee the accuracy of any information presented after the date
  of release, publication or delivery of training sessions.</p>
  <p class="MsoNormal">&nbsp;</p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal">&nbsp;</p>

<h1><a name="_Toc452065390">Lab Overview</a></h1>

<p class="MsoNormal">This lab will provide step-by-step instructions that will
guide you through the installation of Chef Server on Microsoft Azure. &nbsp;The lab
exercises will cover:</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The setup of Chef Server</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The download and install of a Chef Cookbook </p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The configuration of a Windows Virtual Machine node</p>

<p class="MsoNormal">For more information on the inner working of Chef, refer to
the Resources section at the end of this document.</p>

<p class="MsoNormal">Below is a high-level architectural diagram of the components
that make up a Chef deployment.</p>

<p class="MsoNormal"><img width="626" height="524" id="Picture 681" src="./Chef Deployment on Azure_files/image001.png" alt="https://acomdpsstorage.blob.core.windows.net/dpsmedia-prod/azure.microsoft.com/en-us/documentation/articles/virtual-machines-automation-with-chef/20151022044944/2.png"></p>

<h1><a name="_Toc452065391">Prerequisites</a></h1>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in"><span class="MsoHyperlink"><span style="font-family:Symbol;color:windowtext;text-decoration:
none">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Microsoft Azure Subscription: <a href="http://azure.microsoft.com/en-us/pricing/free-trial/">http://azure.microsoft.com/en-us/pricing/free-trial/</a></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span class="MsoHyperlink"><span style="font-family:Symbol;color:windowtext;text-decoration:
none">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>A <b>Chef Workstation</b> with the Chef DK, a Text Editor,
and an SSH Client installed - <i>(This can be a virtual machine created in
Microsoft Azure).&nbsp; <br>
</i>Also, if this is a Windows machine, the following command should be run in
an elevated PowerShell prompt after installing the Chef DK <br>
chef gem install knife-windows</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-top:12.0pt;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Text Editor: Popular editors include <a href="http://atom.io/">Atom</a>,
<a href="http://www.sublimetext.com/">Sublime Text</a>, <a href="https://notepad-plus-plus.org/">Notepad++</a> and <a href="https://code.visualstudio.com/">Visual Studio Code</a> &nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-top:12.0pt;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Telnet/SSH Client for Windows: Popular clients include <a href="https://technet.microsoft.com/en-us/library/cc771275">Microsoft Telnet
Client</a>, <a href="http://www.putty.org/">PuTTY</a>, and <a href="http://anyconnect.net/Default.aspx">AnyConnect</a> </p>

<p class="MsoListParagraphCxSpLast" style="margin-top:12.0pt;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Chef DK: <a href="https://downloads.chef.io/chef-dk/">https://downloads.chef.io/chef-dk/</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>

<h1><a name="_Toc452065392">Time Estimate</a></h1>

<p class="MsoNormal" style="text-indent:.5in">45 minutes</p>

<h1><a name="_Toc452065393">Table of Contents</a></h1>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065389">Chef Deployment on Microsoft Azure<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">1</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065390">Lab Overview<span style="color:#262626;
display:none;text-decoration:none">.. </span><span style="color:#262626;display:none;text-decoration:none">1</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065391">Prerequisites<span style="color:#262626;
display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">1</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065392">Time Estimate<span style="color:#262626;
display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065393">Table of Contents<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065394">Exercise 1: Login to the Azure
Management Portal<span style="color:#262626;display:none;text-decoration:none"> </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065395">Exercise 2: Create a Chef Server<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065396">Exercise 3: Create a FQDN for Chef
Server<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065397">Exercise 4: Log into Chef Server via
SSH<span style="color:#262626;display:none;text-decoration:none">.. </span><span style="color:#262626;display:none;text-decoration:none">2</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065398">Exercise 5: Configure Chef Server<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065399">Exercise 6: Download the Chef Starter
Kit<span style="color:#262626;display:none;text-decoration:none"> </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065400">Exercise 7: Download and Install
Cookbooks<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065401">Exercise 8: Configure a Chef Node in
Azure<span style="color:#262626;display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065402">Lab Summary<span style="color:#262626;
display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoToc1"><a href="https://opsgilityweb.blob.core.windows.net/20160527-lab-chef-deployment-on-azure/Chef%20Deployment%20on%20Azure.htm#_Toc452065403">Resources<span style="color:#262626;
display:none;text-decoration:none">. </span><span style="color:#262626;display:none;text-decoration:none">3</span></a></p>

<p class="MsoNormal">&nbsp;</p>

<h1><a name="_Toc452065394">Exercise 1: Login to the Azure Management Portal</a></h1>

<p class="MsoNormal">In this exercise you will use your Microsoft or Organization
account to login to the Azure management portal to start the lab exercise. </p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Open your
browser and navigate to <a href="http://manage.windowsazure.com/">http://manage.windowsazure.com</a></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Enter the
account associated with your Microsoft Azure subscription.</p>

<p class="MsoListParagraphCxSpMiddle"><img border="0" width="335" height="234" id="Picture 5" src="./Chef Deployment on Azure_files/image002.jpg"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>If your account
is associated with an organization account and a Microsoft account, you may be
prompted to choose which one to authenticate with for your Microsoft Azure
account. </p>

<p class="MsoNormal" style="text-indent:.5in"><img border="0" width="302" height="228" id="Picture 15" src="./Chef Deployment on Azure_files/image003.png"></p>

<h1><a name="_Toc452065395">Exercise 2: Create a Chef Server</a></h1>

<p class="MsoNormal">In this exercise you will create a virtual machine (from a
Marketplace image) that will serve as our Chef Server.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span><span style="line-height:107%;color:black">To create the Chef Server first click on <b>+New</b>,
then type chef into the search box and hit enter.</span> </p>

<p class="MsoListParagraphCxSpMiddle"><img border="0" width="526" height="412" id="Picture 22" src="./Chef Deployment on Azure_files/image004.png"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span><span style="line-height:107%;color:black">Click Chef Server 12 BYOL.</span> </p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle"><img border="0" width="615" height="132" id="Picture 451" src="./Chef Deployment on Azure_files/image005.png"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Leave the
deployment model as Resource Manager and click Create<br>
<img border="0" width="371" height="113" id="Picture 1" src="./Chef Deployment on Azure_files/image006.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Specify the
following for Basics:</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Name: chefsrv</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>User name: demouser</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Authentication type: Password</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Password: demo@pass1 </p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Subscription: <i>Valid Azure Subscription</i></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Resource group (leave +New in the dropdown)</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>New resource group name: AzureChefRG</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Location: Location nearest you (ex: South Central US)</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in"><img border="0" width="221" height="455" src="./Chef Deployment on Azure_files/image007.png"></p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click on A4
Standard as the size of the virtual machine and then click Select.<br>
<img border="0" width="139" height="350" id="Picture 452" src="./Chef Deployment on Azure_files/image008.png"></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="Note" style="margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;background:#F2F2F2"><b>*NOTE:</b>&nbsp; We left the default A4
Standard Pricing Tier just for the purpose of this exercise. <br>
This Pricing Tier is for <i>Azure Infrastructure Costs</i>, not the cost of <i>Chef
Server 12 BYOL</i> application. <br>
If you plan to deploy Chef Server in a development or production environment,
then you should follow <a href="https://docs.chef.io/chef_system_requirements.html">Chef's System
Requirements</a> as if it were On-premises requirements. </p>

</div>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Accept the
defaults on the Settings blade and click <b>OK</b></p>

<p class="MsoListParagraphCxSpMiddle"><img border="0" width="243" height="722" id="Picture 453" src="./Chef Deployment on Azure_files/image009.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Verify the
settings in the Summary and click <b>OK</b><br>
<img border="0" width="355" height="667" id="Picture 7" src="./Chef Deployment on Azure_files/image010.png"></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>On the purchase
blade, verify that there is no charge for the Chef Server 12 software (since we
chose the BYOL option).<br>
<img border="0" width="393" height="604" id="Picture 17" src="./Chef Deployment on Azure_files/image011.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>The deployment
of the Chef Server virtual machine will take several minutes, and you will be
notified in the Microsoft Azure Portal when the task is complete.<br>
<img border="0" width="327" height="114" id="Picture 459" src="./Chef Deployment on Azure_files/image012.png"></p>

<h1><a name="_Toc452065396">Exercise 3: Create a FQDN for Chef Server</a></h1>

<p class="MsoNormal">In this exercise you will create a fully qualified domain
name for our Chef Server virtual machine.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>To create the
FQDN, click the Public IP address link of the chefsrv virtual machine blade.<br>
<img border="0" width="492" height="320" id="Picture 463" src="./Chef Deployment on Azure_files/image013.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Note that the
DNS name for the Public IP is blank. Click All settings for the Public IP blade.<br>
<img border="0" width="482" height="289" id="Picture 464" src="./Chef Deployment on Azure_files/image014.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Open the <b>Configuration</b>
tab in the Public IP Settings. Enter the desired DNS name label and Save this
configuration.<br>
<img border="0" width="504" height="343" id="Picture 465" src="./Chef Deployment on Azure_files/image015.png"><br>
The Public IP resource will now show this new DNS label on its blade.<br>
<br>
</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Verify that the
DNS name/FQDN appears next to the IP address for the Public IP resource. &nbsp;Once
confirmed, you can now connect remotely to the virtual machine using this DNS
name.<br>
<img border="0" width="504" height="295" id="Picture 466" src="./Chef Deployment on Azure_files/image016.png"></p>

<h1><a name="_Toc452065397">Exercise 4: Log into Chef Server via SSH</a></h1>

<p class="MsoNormal">In this exercise you will connect to the Chef Server via SSH
(using PuTTy) and confirm that the initial configuration has completed.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Launch PuTTy and
connect using the IP address or the FQDN we specified in the previous exercise.<br>
<img border="0" width="423" height="409" id="Picture 467" src="./Chef Deployment on Azure_files/image017.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click the <b>Yes</b>
button to get passed the <i>PuTTy Security Alert</i> dialog box.<br>
<img border="0" width="410" height="293" id="Picture 468" src="./Chef Deployment on Azure_files/image018.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Login using the
credential of the virtual machine that were specified during creation.
(demouser | demo@pass1)<br>
<img border="0" width="577" height="711" id="Picture 469" src="./Chef Deployment on Azure_files/image019.jpg"><br>
<br>
</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>To confirm that
the Chef Server has completed its initial configuration, you can check one of
the log files by running the following command in the SSH window.</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">tailf
/var/log/cloud-init-output.log</span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span>The output should return something includes details about when it was
finished</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">Cloud-init v. 0.7.5 finished
at Wed, 25 May 2016 16:34:09 +0000. Datasource DataSourceAzureNet
[seed=/var/lib/waagent].&nbsp; Up 68.46 seconds</span></p>

</div>

<h1><a name="_Toc452065398">Exercise 5: Configure Chef Server</a></h1>

<p class="MsoNormal">In this exercise you will configure settings of the Chef
Server that include setting the DNS Name in the SSH session established in the
previous exercise. </p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:0in;margin-right:22.7pt">

<p class="Note" style="margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;background:#F2F2F2"><b>NOTE*</b> Substitute &lt;fqdn&gt; for
the fully qualified domain name (FQDN) that was created in Exercise 3: Create a
FQDN for Chef Server <i>(ex: chefsrv.southcentralus.cloudapp.azure.com)</i>.</p>

</div>

<p class="MsoListParagraphCxSpFirst">&nbsp;</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Remove the Nginx
configuration for the existing Chef Analytics configuration</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">sudo rm
/var/opt/opscode/nginx/etc/nginx.d/analytics.conf</span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Update the /etc/chef-marketplace/marketplace.rb file to incl</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">ude the api_fqdn of the machine</span></span></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">echo 'api_fqdn "&lt;fqdn&gt;"' | sudo tee -a
/etc/chef-marketplace/marketplace.rb</span></span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Update the /etc/opscode-analytics/opscode-analytics.rb file to
include the analytics_fqdn of the machine</span></span></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">echo 'analytics_fqdn "&lt;fqdn&gt;"' | sudo tee -a
/etc/opscode-analytics/opscode-analytics.rb</span></span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Run the following command to update the hostname and reconfigure
the software</span></span></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">sudo chef-marketplace-ctl hostname &lt;fqdn&gt;</span></span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Run the following command to update reconfigure Chef Analytics</span></span></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">sudo opscode-analytics-ctl reconfigure</span></span></p>

</div>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Proceed to the web based setup wizard </span></span><span class="MsoHyperlink">https://&lt;fqdn&gt;/signup</span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">.&nbsp; </span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Since we did not configure a certificate, you must acknowledge the
security prompt in your browser.<br>
</span></span><img border="0" width="548" height="465" id="Picture 470" src="./Chef Deployment on Azure_files/image020.png"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
<br>
</span></span></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Before you can run through the wizard you must provide the VM Name
in order to ensure that only you are configuring the Chef server.</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
</span></span><img border="0" width="307" height="179" id="Picture 472" src="./Chef Deployment on Azure_files/image021.png"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
<br>
</span></span></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Click the Click here to get started! link<br>
</span></span><span class="CodeBlockChar"><span style="line-height:107%;
font-family:&quot;Segoe UI&quot;,sans-serif;color:black"><img border="0" width="264" height="150" id="Picture 479" src="./Chef Deployment on Azure_files/image022.png"></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
<br>
</span></span></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">If you get an error about Sign Up being disabled due to a timeout,
run the command specified (chef-manage-ctl reconfigure) in your SSH connection
to your Chef Server </span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="line-height:107%;
font-family:&quot;Segoe UI&quot;,sans-serif;color:black">(be sure that you are running
with a user with elevated privileges by running sudo su</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">)</span></span><span class="CodeBlockChar"><span style="line-height:
107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">.<br>
</span></span><span class="CodeBlockChar"><span style="line-height:107%;
font-family:&quot;Segoe UI&quot;,sans-serif;color:black"><img border="0" width="328" height="129" id="Picture 672" src="./Chef Deployment on Azure_files/image023.png"></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
<br>
</span></span></p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">10.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Fill out the form to create a Chef user account</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> and click Get Started</span></span></p>

<p class="MsoNormal" style="text-indent:.5in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black"><img border="0" width="464" height="487" id="Picture 673" src="./Chef Deployment on Azure_files/image024.png"></span></span></p>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">11.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Create an organization with a friendly and short name.<br>
</span></span><img border="0" width="538" height="306" id="Picture 674" src="./Chef Deployment on Azure_files/image025.png"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"><br>
</span></span><img border="0" width="538" height="321" id="Picture 675" src="./Chef Deployment on Azure_files/image026.png"></p>

<h1><a name="_Toc452065399"><span class="CodeBlockChar"><span style="line-height:
107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:#5B9BD5">Exercise 6: Download the
Chef Start</span></span><span class="CodeBlockChar"><span style="line-height:
107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:#5B9BD5">er</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:#5B9BD5"> Kit</span></span></a></h1>

<p class="MsoNormal">In this exercise you will download the Chef Starter Kit to
your <b>Chef Workstation</b> and run some commands against your Chef Server.&nbsp; <br>
Your <b>Chef Workstation</b> is listed as one of the prerequisites to this lab
 it is simply a machine (physical or virtual) that has the Chef DK, a Text
Editor, and an SSH Client installed.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>After logging
into your Chef Server in the previous exercise, click the Download Starter Kit
link and acknowledge that your organization keys will be reset.<br>
<img border="0" width="455" height="130" id="Picture 676" src="./Chef Deployment on Azure_files/image027.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Extract the
contents of the downloaded chef-starter.zip file.&nbsp; It contains a folder named chef-repo.&nbsp;
<br>
You can choose to move this folder to a more appropriate location on your hard
drive, for the purposes of this lab, we will leave it in the
downloads\chef-starter folder.</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Edit your
knife.rb file (located in chef-starter\chef-repo\.chef\knife.rb) so that it
will not try to valid an SSL Certificate by adding the following line to the
bottom of the file.</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">ssl_verify_mode :verify_none</span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in"><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">Create a file named client.rb and save it in the same location as
knife.rb (</span></span>chef-starter\chef-repo\.chef<span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">).</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">&nbsp; Populate the file with the information below where you replace
the information in the &lt;&gt; with the information relevant to your
environment.</span></span></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">log_level&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :info</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">log_location&nbsp;&nbsp;&nbsp;&nbsp; STDOUT</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">chef_server_url&nbsp; </span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black">"</span></span><span class="MsoHyperlink"><span style="font-size:10.0pt">https://&lt;fqdn&gt;/&lt;orgname&gt;</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black">"<br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">validation_client_name "&lt;orgname&gt;-validator"</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">validation_key
"{current_dir}/&lt;orgname&gt;-validator.pem"</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">client_key "{current_dir}/&lt;username&gt;.pem"</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;color:black"><br>
</span></span><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">ssl_verify_mode :verify_none</span></span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span><span class="CodeBlockChar"><span style="line-height:107%;font-family:
&quot;Segoe UI&quot;,sans-serif;color:black">To test the connection to </span></span><span class="CodeBlockChar"><b><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black">the Chef Server</span></b></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">, run
the following command</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">s</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> from the </span></span><span class="CodeBlockChar"><b><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">Chef
Workstation</span></b></span><span class="CodeBlockChar"><span style="line-height:
107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">.</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> Th</span></span><span class="CodeBlockChar"><span style="line-height:
107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">ese</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> command</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">s</span></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> should be run from an </span></span><span class="CodeBlockChar"><b><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;color:black">elevated</span></b></span><span class="CodeBlockChar"><span style="line-height:107%;font-family:&quot;Segoe UI&quot;,sans-serif;
color:black"> PowerShell prompt and the directory you should be in </span></span>is
chef-starter\chef-repo\.chef.</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">knife ssl fetch</span></p>

</div>

<p class="MsoNormal" style="margin-left:.5in"><img border="0" width="627" height="118" id="Picture 9" src="./Chef Deployment on Azure_files/image028.png"></p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span class="CodeBlockChar"><span style="font-size:10.0pt;
color:black">knife client list</span></span></p>

</div>

<p class="MsoNormal" style="margin-left:.5in"><span style="color:black">It should
return &lt;orgname&gt;-validator<br>
</span><img border="0" width="645" height="49" id="Picture 12" src="./Chef Deployment on Azure_files/image029.png"></p>

<h1><a name="_Toc452065400">Exercise 7: Download and Install Cookbooks</a></h1>

<p class="MsoNormal">In this exercise you will download Chef cookbooks to your <b>Chef
Workstation</b> and upload them to your <b>Chef Server</b> instance.&nbsp; <br>
Chef cookbooks can be manually downloaded from the <a href="https://supermarket.chef.io/">Chef Supermarket</a>.&nbsp; <br>
It is repository of cookbooks that are created and maintained by Chefs
Community.&nbsp; <br>
You can search for and download cookbooks through your browser as well as from
the command line (in an elevated PowerShell prompt on a Windows machine)</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Open and <b>elevated
PowerShell</b> console and change directory to (chef-starter\chef-repo)</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Download the <b>learn_chef_iis</b>
cookbook using knife.</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">knife cookbook site download
learn_chef_iis</span></p>

</div>

<p class="MsoListParagraph" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span>Extract the contents of the downloaded <b>learn_chef_iis-0.2.1.tar.gz</b>
file</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">tar -zxvf
learn_chef_iis-0.2.1.tar.gz -C cookbooks</span></p>

</div>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>This will create
a <b>learn_chef_iis</b> folder under chef-starter\chef-repo\cookbooks<br>
<img border="0" width="678" height="372" id="Picture 16" src="./Chef Deployment on Azure_files/image030.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Now you will
upload this cookbook to your <b>Chef Server</b> instance with the following
command. (be sure to be in the chef-repo directory).</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:0in">

<p class="CodeBlock"><span style="font-size:10.0pt">knife cookbook upload
learn_chef_iis</span></p>

</div>

<p class="MsoNormal" style="text-indent:.5in"><img border="0" width="672" height="69" id="Picture 27" src="./Chef Deployment on Azure_files/image031.png"><br>
<br>
</p>

<p class="MsoListParagraph" style="text-indent:-.25in">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span>You can confirm the upload of this cookbook by logging into your Chef
Server portal and clicking on the <b>Policy </b>tab.<br>
<img border="0" width="635" height="442" id="Picture 11" src="./Chef Deployment on Azure_files/image032.png"></p>

<h1><a name="_Toc452065401">Exercise 8: Configure a Chef Node in Azure</a></h1>

<p class="MsoNormal">Now that your <b>Chef Server</b> is configured on Microsoft
Azure, use the following steps to configure a node using the <b>Chef Client</b>
plugin extensions. <br>
The same steps are used to configure either a Linux or Windows client node  we
will be configuring a Windows node in our lab.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>In the Microsoft
Azure Portal, click +New, Virtual Machines, Windows Server 2012 R2 Datacenter.&nbsp;
<br>
Leave the deployment mode as <b>Resource Manager</b> and click <b>Create</b>.<br>
<img border="0" width="683" height="437" id="Picture 13" src="./Chef Deployment on Azure_files/image033.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Specify the
following for Basics and click OK:</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">a.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Name: chefwin</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">b.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>User name:
demouser</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">c.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span>Authentication
type: Password</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">d.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Password:
demo@pass1 </p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">e.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Subscription: <i>Valid
Azure Subscription</i></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">f.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Resource
group: AzureChefRG (<i>created in exercise 1</i>)</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">g.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Location:
Location nearest you (ex: South Central US)<br>
<img border="0" width="247" height="761" id="Picture 14" src="./Chef Deployment on Azure_files/image034.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Choose the
recommended Virtual machine size and click Select<br>
<img border="0" width="484" height="567" id="Picture 18" src="./Chef Deployment on Azure_files/image035.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>On the Settings
blade, click on <b>Extensions, Add extension</b> and choose the <b>Windows Chef
Extension</b> and click <b>Create</b>.&nbsp; <br>
If more than one version of the Chef Extension is available, choose the latest
or topmost in the list.<br>
<img border="0" width="689" height="359" id="Picture 19" src="./Chef Deployment on Azure_files/image036.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Specify the
following in the <b>Install extension</b> blade and click <b>OK</b>:</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">a.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Chef Server URL:
https://&lt;fqdn&gt;/organizations/&lt;orgname&gt;</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">b.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Chef Node Name:
chefwin</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">c.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span>Run List:
learn_chef_iis</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">d.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Validation Client
Name: &lt;orgname&gt;-validator</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">e.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Validation Key:
Browse to (<i>chef-starter\chef-repo\.chef\&lt;orgname&gt;-validator.pem</i>)</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in">f.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Client
Configuration File: Browse to (<i>chef-starter\chef-repo\.chef\client.rb</i>)<br>
<img border="0" width="250" height="734" id="Picture 25" src="./Chef Deployment on Azure_files/image037.png"></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click <b>OK</b>
on the <b>Install extension</b> blade as well as the <b>Extensions</b> blade to
return to the <b>Settings</b> blade.&nbsp; <br>
Here we will configure the Network to allow for port 80 and port 443 traffic
(http &amp; https).</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>To configure
HTTP, click <b>Network security group</b>, then <b>+Add an inbound rule</b> and
specify the following:</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Name: <b>HTTP</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Priority: <b>100</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Source: select <b>Any</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Source port range: <b>*</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Destination: select <b>Any</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Destination Port Range: <b>80</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Action: select <b>Allow<br>
</b><img border="0" width="633" height="387" id="Picture 26" src="./Chef Deployment on Azure_files/image038.png"><b><br>
<br>
</b></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>To configure
HTTPS, click <b>+Add an inbound rule</b> and specify the following:</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Name: <b>HTTPS</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Priority: <b>101</b>Source: select <b>Any</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Source port range: <b>*</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Destination: select <b>Any</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Destination Port Range: <b>443</b></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-left:1.0in;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Action: select <b>Allow<br>
</b><img border="0" width="417" height="524" id="Picture 29" src="./Chef Deployment on Azure_files/image039.png"><b><br>
<br>
</b></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click <b>OK</b>
on the open blades to get to the <b>Summary</b> blade, and click <b>OK</b> if <b>Validation
passed</b>.<br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">10.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span>The deployment of the <b>Chef Node</b>
virtual machine will take several minutes, and you will be notified in the
Microsoft Azure Portal when the task is complete.<br>
<img border="0" width="327" height="114" id="Picture 23" src="./Chef Deployment on Azure_files/image040.png"><br>
<br>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">11.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span>There are various ways to verify
that the server was configure correctly by Chef.&nbsp; <br>
The first way to check is to browse to the IP Address of the newly created Chef
Node.&nbsp; <br>
To obtain the IP address in the Microsoft Azure Portal, click Resource groups,
AzureChefRG, chefwin (either the Virtual Machine or Public IP Address icon).<br>
<img border="0" width="686" height="241" id="Picture 24" src="./Chef Deployment on Azure_files/image041.png"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">12.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span>Now that we have the Public IP
Address, we can simply browse to that address (http://&lt;public ip
address&gt;).&nbsp; <br>
This will load the customized default home page.</p>

<p class="MsoListParagraphCxSpMiddle"><img border="0" width="339" height="159" id="Picture 31" src="./Chef Deployment on Azure_files/image042.png"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">13.<span style="font:7.0pt &quot;Times New Roman&quot;"> </span>Another way to verify that the <b>Chef
Node</b> was successfully configured, is to log into the <b>Chef Portal </b>(<i>https://FQDN_of_Chef_Server</i>)
and click on the <b>Nodes</b> tab.<br>
<img border="0" width="676" height="118" id="Picture 30" src="./Chef Deployment on Azure_files/image043.png"></p>

<p class="MsoListParagraphCxSpLast">&nbsp;</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="Note" style="margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;background:#F2F2F2"><b>NOTE*</b> Now that you are done with the
lab, you may want to delete the <b>Resource group</b> that was created to avoid
incurring unexpected costs.&nbsp; This is done by logging on to the Azure Portal,
clicking <b>Resource groups</b>, choosing the Resource group you created and
clicking the <b>Delete</b> icon.&nbsp; You will be prompted to confirm the Resource
group name as this is an <b>irreversible</b> action.</p>

</div>

<h1><a name="_Toc452065402">Lab Summary</a></h1>

<p class="MsoNormal">In this lab you created a Chef Server that is hosted in
Microsoft Azure.&nbsp; <br>
You then configured the server with a fully qualified domain name and uploaded
a cookbook that was obtained from the Chef Marketplace.&nbsp; <br>
After that, you configured a Chef Node, which was a Windows Server virtual
machine with the Chef Extension, to have a Run List executed that configured
IIS and default web page.&nbsp; <br>
This was then validated in the Chef Portal as well as by browsing to the Public
IP Address of the Chef Node.</p>

<h1><a name="_Toc452065403">Resources</a></h1>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Chef Documentation: <a href="https://docs.chef.io/">https://docs.chef.io</a></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Chef Tutorials: <a href="https://learn.chef.io/tutorials/">https://learn.chef.io/tutorials/</a></p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Chef Supermarket: <a href="https://supermarket.chef.io/">https://supermarket.chef.io/</a>
</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in"><span class="MsoHyperlink"><span style="font-family:Symbol;color:windowtext;text-decoration:
none">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Microsoft Azure Subscription: <a href="http://azure.microsoft.com/en-us/pricing/free-trial/">http://azure.microsoft.com/en-us/pricing/free-trial/</a></p>

<p class="MsoListParagraphCxSpMiddle" style="margin-top:12.0pt;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Text Editors: <a href="http://atom.io/">Atom</a>, <a href="http://www.sublimetext.com/">Sublime Text</a>, <a href="https://notepad-plus-plus.org/">Notepad++</a><span class="MsoHyperlink">,</span>
<a href="https://code.visualstudio.com/">Visual Studio Code</a> &nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="margin-top:12.0pt;text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Telnet/SSH Client for Windows: <a href="https://technet.microsoft.com/en-us/library/cc771275">Microsoft Telnet
Client</a>, <a href="http://www.putty.org/">PuTTY</a>, <a href="http://anyconnect.net/Default.aspx">AnyConnect</a> </p>

<p class="MsoListParagraphCxSpLast" style="text-indent:-.25in"><span style="font-family:Symbol">·<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Chef DK: <a href="https://downloads.chef.io/chef-dk/">https://downloads.chef.io/chef-dk/</a></p>

</div>




</body></html>