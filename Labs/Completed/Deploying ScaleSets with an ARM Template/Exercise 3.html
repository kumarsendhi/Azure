
<!-- saved from url=(0112)https://opsgilityweb.blob.core.windows.net/online-labs/deploying-azure-scale-sets-arm-template/Exercise%203.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<meta name="Generator" content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:"Segoe UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#4472C4;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#2F5496;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:2.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Calibri Light",sans-serif;
	color:#1F3763;
	font-weight:normal;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{mso-style-name:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1CxSp";
	mso-style-link:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Segoe UI",sans-serif;
	color:#4472C4;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Segoe UI",sans-serif;
	color:#2F5496;
	font-weight:bold;}
p.Note, li.Note, div.Note
	{mso-style-name:Note;
	mso-style-link:"Note Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.NoteCxSpFirst, li.NoteCxSpFirst, div.NoteCxSpFirst
	{mso-style-name:NoteCxSpFirst;
	mso-style-link:"Note Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.NoteCxSpMiddle, li.NoteCxSpMiddle, div.NoteCxSpMiddle
	{mso-style-name:NoteCxSpMiddle;
	mso-style-link:"Note Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.NoteCxSpLast, li.NoteCxSpLast, div.NoteCxSpLast
	{mso-style-name:NoteCxSpLast;
	mso-style-link:"Note Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
span.NoteChar
	{mso-style-name:"Note Char";
	mso-style-link:Note;
	font-family:"Segoe UI",sans-serif;
	color:black;
	background:#F2F2F2;}
span.ListParagraphChar
	{mso-style-name:"List Paragraph Char\,Bullet List Char\,FooterText Char\,numbered Char\,List Paragraph1 Char\,Paragraphe de liste1 Char\,Bulletr List Paragraph Char\,\5217\51FA\6BB5\843D Char\,\5217\51FA\6BB5\843D1 Char\,List Paragraph2 Char\,List Paragraph21 Char\,Listeafsnit1 Char\,Parágrafo da Lista1 Char";
	mso-style-link:"List Paragraph\,Bullet List\,FooterText\,numbered\,List Paragraph1\,Paragraphe de liste1\,Bulletr List Paragraph\,\5217\51FA\6BB5\843D\,\5217\51FA\6BB5\843D1\,List Paragraph2\,List Paragraph21\,Listeafsnit1\,Parágrafo da Lista1\,Párrafo de lista1\,\30EA\30B9\30C8\6BB5\843D1\,Bullet list\,List Paragraph11\,Listenabsatz1";
	font-family:"Segoe UI",sans-serif;
	color:black;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Segoe UI",sans-serif;
	color:#262626;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri Light",sans-serif;
	color:#1F3763;}
p.Code, li.Code, div.Code
	{mso-style-name:Code;
	mso-style-link:"Code Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.CodeCxSpFirst, li.CodeCxSpFirst, div.CodeCxSpFirst
	{mso-style-name:CodeCxSpFirst;
	mso-style-link:"Code Char";
	margin-top:6.0pt;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.CodeCxSpMiddle, li.CodeCxSpMiddle, div.CodeCxSpMiddle
	{mso-style-name:CodeCxSpMiddle;
	mso-style-link:"Code Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.CodeCxSpLast, li.CodeCxSpLast, div.CodeCxSpLast
	{mso-style-name:CodeCxSpLast;
	mso-style-link:"Code Char";
	margin-top:0in;
	margin-right:22.7pt;
	margin-bottom:6.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Segoe UI",sans-serif;
	color:black;}
p.CodeBlock, li.CodeBlock, div.CodeBlock
	{mso-style-name:"Code Block";
	mso-style-link:"Code Block Char";
	margin-top:8.0pt;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpFirst, li.CodeBlockCxSpFirst, div.CodeBlockCxSpFirst
	{mso-style-name:"Code BlockCxSpFirst";
	mso-style-link:"Code Block Char";
	margin-top:8.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpMiddle, li.CodeBlockCxSpMiddle, div.CodeBlockCxSpMiddle
	{mso-style-name:"Code BlockCxSpMiddle";
	mso-style-link:"Code Block Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
p.CodeBlockCxSpLast, li.CodeBlockCxSpLast, div.CodeBlockCxSpLast
	{mso-style-name:"Code BlockCxSpLast";
	mso-style-link:"Code Block Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	background:#F2F2F2;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:Consolas;
	color:#262626;}
span.CodeChar
	{mso-style-name:"Code Char";
	mso-style-link:Code;
	font-family:Consolas;
	color:#2E75B6;
	background:#F2F2F2;}
span.CodeBlockChar
	{mso-style-name:"Code Block Char";
	mso-style-link:"Code Block";
	font-family:Consolas;
	color:#262626;
	background:#F2F2F2;}
p.NormalIndent1, li.NormalIndent1, div.NormalIndent1
	{mso-style-name:"Normal Indent 1";
	mso-style-link:"Normal Indent 1 Char";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	font-size:8.0pt;
	font-family:"Segoe UI Semilight",sans-serif;}
p.CodeIndent, li.CodeIndent, div.CodeIndent
	{mso-style-name:"Code Indent";
	mso-style-link:"Code Indent Char";
	margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Lucida Console";
	color:blue;}
span.NormalIndent1Char
	{mso-style-name:"Normal Indent 1 Char";
	mso-style-link:"Normal Indent 1";
	font-family:"Segoe UI Semilight",sans-serif;}
span.CodeIndentChar
	{mso-style-name:"Code Indent Char";
	mso-style-link:"Code Indent";
	font-family:"Lucida Console";
	color:blue;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang="EN-US" link="#0563C1" vlink="#954F72">

<div class="WordSection1">

<h1>Exercise 3: Enable Auto Scale </h1>

<h2>Overview</h2>

<p class="MsoNormal">In this exercise, you will add auto scale rules to the Azure
Virtual Machine scale set that will automatically add or remove instances
depending on rules you specify in the configuration. <br>
<br>
</p>

<h2>Time Estimate</h2>

<p class="MsoNormal">40 minutes</p>

<p class="MsoNormal">&nbsp;</p>

<h2>Task 1: Add the Auto Scale Resource</h2>

<h3>Overview</h3>

<p class="MsoNormal">In this task, you will add the Azure Auto Scale
configuration and configure it for the virtual machine scale set resource
deployed earlier.</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click the new
resource button in the JSON outline window. </p>

<p class="MsoListParagraphCxSpMiddle"><img width="72" height="37" id="Picture 1" src="./Exercise 3_files/image001.jpg"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Choose the <b>Auto
scale for Windows VMSS Extension</b>, specify <b>ClouShopAutoScale</b> for the
name and click <b>Add</b>.</p>

<p class="MsoListParagraphCxSpMiddle"><img width="575" height="85" id="Picture 2" src="./Exercise 3_files/image002.jpg"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Navigate to the
new resource in the JSON outline window. </p>

<p class="MsoListParagraphCxSpMiddle"><img width="194" height="142" id="Picture 3" src="./Exercise 3_files/image003.jpg"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle">Lets review the default auto scale rules that
were added to the template.</p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpLast">The capacity configuration specifies that
there will be at least one instance, but it can scale up to 10 automatically. </p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="CodeCxSpFirst" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2">"capacity"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"minimum"<span style="color:black">: </span><span style="color:#A31515">"1"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"maximum"<span style="color:black">: </span><span style="color:#A31515">"10"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"default"<span style="color:black">: </span><span style="color:#A31515">"1"</span></p>

<p class="CodeCxSpLast" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">},</span></p>

</div>

<p class="MsoNormal">&nbsp;</p>

<p class="MsoNormal" style="margin-left:.5in"><b>There are two rules in the rules
block. </b></p>

<p class="MsoNormal" style="margin-left:.5in">The first is if the average CPU
goes above 80 percent for a time window of greather than 5 minutes then it will
execute the scaleAction of increasing an instance by 1. </p>

<p class="MsoNormal" style="margin-left:.5in">The second tells the cpu to remove
an instance if the CPU is below 60 percent for greater than 5 minutes. </p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="CodeCxSpFirst" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2">"rules"<span style="color:black">: [</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">{</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"metricTrigger"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricName"<span style="color:black">: </span><span style="color:#A31515">"[variables('wadProcessorMetricName')]"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricNamespace"<span style="color:black">: </span><span style="color:#A31515">""</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricResourceUri"<span style="color:black">: </span><span style="color:#A31515">"[resourceId('Microsoft.Compute/virtualMachineScaleSets',
variables('namingInfix'))]"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeGrain"<span style="color:black">: </span><span style="color:#A31515">"PT1M"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"statistic"<span style="color:black">: </span><span style="color:#A31515">"Average"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeWindow"<span style="color:black">: </span><span style="color:#A31515">"PT5M"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeAggregation"<span style="color:black">: </span><span style="color:#A31515">"Average"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"operator"<span style="color:black">: </span><span style="color:#A31515">"GreaterThan"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"threshold"<span style="color:black">: 80</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; },</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"scaleAction"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"direction"<span style="color:black">: </span><span style="color:#A31515">"Increase"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"type"<span style="color:black">: </span><span style="color:#A31515">"ChangeCount"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"value"<span style="color:black">: </span><span style="color:#A31515">"1"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"cooldown"<span style="color:black">: </span><span style="color:#A31515">"PT5M"</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; }</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">},</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">{</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"metricTrigger"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricName"<span style="color:black">: </span><span style="color:#A31515">"[variables('wadProcessorMetricName')]"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricNamespace"<span style="color:black">: </span><span style="color:#A31515">""</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"metricResourceUri"<span style="color:black">: </span><span style="color:#A31515">"[resourceId('Microsoft.Compute/virtualMachineScaleSets',
variables('namingInfix'))]"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeGrain"<span style="color:black">: </span><span style="color:#A31515">"PT1M"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"statistic"<span style="color:black">: </span><span style="color:#A31515">"Average"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeWindow"<span style="color:black">: </span><span style="color:#A31515">"PT5M"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"timeAggregation"<span style="color:black">: </span><span style="color:#A31515">"Average"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"operator"<span style="color:black">: </span><span style="color:#A31515">"LessThan"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"threshold"<span style="color:black">: 60</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; },</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"scaleAction"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"direction"<span style="color:black">: </span><span style="color:#A31515">"Decrease"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"type"<span style="color:black">: </span><span style="color:#A31515">"ChangeCount"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"value"<span style="color:black">: </span><span style="color:#A31515">"1"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;&nbsp;&nbsp; </span>"cooldown"<span style="color:black">: </span><span style="color:#A31515">"PT1M"</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; }</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">}</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">]</span></p>

<p class="CodeCxSpLast" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp;</span></p>

</div>

<p class="MsoNormal">&nbsp;</p>

<p class="MsoListParagraph" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;
</span>Change the maximum property of the capacity block from 10 to 4
instances. </p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="CodeCxSpFirst" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2">"capacity"<span style="color:black">: {</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"minimum"<span style="color:black">: </span><span style="color:#A31515">"1"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"maximum"<span style="color:black">: </span><span style="color:#A31515">"4"</span><span style="color:black">,</span></p>

<p class="CodeCxSpMiddle" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">&nbsp; </span>"default"<span style="color:black">: </span><span style="color:#A31515">"1"</span></p>

<p class="CodeCxSpLast" style="margin-top:6.0pt;margin-right:0in;margin-bottom:
6.0pt;margin-left:0in;background:#F2F2F2"><span style="color:black">},</span></p>

</div>

<p class="MsoListParagraph">&nbsp;</p>

<h2>Task 2: Deploy the Solution</h2>

<h3>Overview</h3>

<p class="MsoNormal">In this task, you will deploy the template to Microsoft
Azure</p>

<p class="MsoListParagraphCxSpFirst" style="text-indent:-.25in">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Right click on
the <b>CloudSS</b> project, click <b>Deploy</b> and then <b>New</b>. </p>

<p class="MsoListParagraphCxSpMiddle"><img width="593" height="70" src="./Exercise 3_files/image004.png"></p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>In the resource
group drop down, create a new resource group using the default name <b>CloudSS</b>.</p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Click the <b>Edit
Parameters</b> button. </p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<p class="MsoListParagraphCxSpMiddle" style="text-indent:-.25in">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span>Specify the
following configuration options and click Save, and then click <b>Deploy</b>.</p>

<p class="MsoListParagraphCxSpMiddle">&nbsp;</p>

<table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left:.5in;border-collapse:collapse;border:none">
 <tbody><tr>
  <td width="312" valign="top" style="width:233.75pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt">
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">&nbsp;</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">vmssName: CloudShopScaleSet</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">InstanceCount: 2</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">adminUsername: demouser</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">adminPassword: demo@pass123</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">SQLVMName: armsql</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">SQLVMAdminUserName: demouser</p>
  <p class="MsoListParagraphCxSpMiddle" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal">SQLVMAdminPassword: demo@pass123</p>
  </td>
  <td width="312" valign="top" style="width:233.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt">
  <p class="MsoListParagraphCxSpLast" style="margin:0in;margin-bottom:.0001pt;
  line-height:normal"><img width="439" height="317" id="Picture 5" src="./Exercise 3_files/image005.jpg"></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoListParagraph">&nbsp;</p>

<div style="border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#F2F2F2;margin-left:.5in;margin-right:22.7pt">

<p class="Note" style="margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:0in;background:#F2F2F2">Note: it may take 20-30 minutes for the
deployment to complete. </p>

</div>

</div>




</body></html>