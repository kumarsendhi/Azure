loginViewModel={userName:ko.observable().extend({required:{message:"Please enter Username"}}),password:ko.observable().extend({required:{message:"Please enter Password"}}),returnUrl:ko.observable(),StatusMessage:ko.observable(),rememberme:ko.observable(!1),subscriptionId:ko.observable(),LoginSubmit:function(){var n=this,t;n.errors=ko.validation.group(n);n.errors().length==0?(t={Email:loginViewModel.userName(),Password:loginViewModel.password(),ReturnUrl:$("#returnUrl").val(),RememberMe:$("#Rememberme").is(":checked"),SubscriptionId:$("#subscriptionLoginId").val(),SubscriptionInvitationId:$("#subscriptionInvitationLoginId").val(),SubscriptionGuid:$("#subscriptionGuid_Invitation").val(),TeamGuid:$("#teamGuid_Invitation").val()},ajaxRequest.makeRequest("/Account/PopUpLogin","POST",t,function(n){loginViewModel.loggedInStatus(n)})):n.errors.showAllMessages(!0)},LoginDropSubmit:function(){var n=$("#loginButtonContent"),t,i;n.toggle();n.not(":visible")&&(n.show(),$("#signInDrop").addClass("waitcursor"));t=this;t.errors=ko.validation.group(t);t.errors().length==0?(i={Email:loginViewModel.userName(),Password:loginViewModel.password(),ReturnUrl:$("#returnUrlDrop").val(),RememberMe:$("#RememberMe").is(":checked"),SubscriptionId:$("#subscriptionLoginId").val(),SubscriptionInvitationId:$("#subscriptionInvitationLoginId").val(),SubscriptionGuid:$("#subscriptionGuid_Invitation").val(),TeamGuid:$("#teamGuid_Invitation").val()},ajaxRequest.makeRequest("/Account/PopUpLogin","POST",i,function(n){loginViewModel.loggedInStatusDrop(n)},null,null,!0)):(t.errors.showAllMessages(!0),n.is(":visible")&&(n.hide(),$("#signInDrop").removeClass("waitcursor")))},LoginNewUserSubmit:function(){var n=this;n.errors=ko.validation.group(n);n.errors().length==0?$("#loginFormPage").submit():n.errors.showAllMessages(!0)},CreateNewSubscription:function(){var n=opsgility.getBaseURL();window.location.href=n+"/Subscription/NewSubscription"},loggedInStatus:function(n){var i=$("#trainingScheduleId").val(),t;if(n.IsSuccess==!0)if(i!=null&&i>0){var u=loginViewModel.loadCurrentSubscription(),r=loginViewModel.subscriptionId(),t=opsgility.getBaseURL();window.location.href=t+"/TrainingSchedule/TrainingScheduleList?trainingScheduleId="+i+"&selectedsubscription="+r}else t=opsgility.getBaseURL(),window.location.href=window.location.href.indexOf(n.ReturnUrl)==-1?t+n.ReturnUrl:t;else loginViewModel.StatusMessage(n.Message),$("#invalidLogin").show()},loggedInStatusDrop:function(n){var i=$("#loginButtonContent"),u=$("#trainingScheduleId").val(),r=$("#mocCourseCode").val(),t;n.IsSuccess==!0?(u!=null&&u>0?(t=opsgility.getBaseURL(),window.location.href=t+"/TrainingSchedule/TrainingScheduleList?trainingScheduleId="+u):r!=null&&r!=""&&r!=undefined?loginViewModel.manageMOCPurchase(r):(t=opsgility.getBaseURL(),window.location.href.indexOf(n.ReturnUrl)==-1&&n.ReturnUrl!=null?window.location.href=t+n.ReturnUrl:n.ReturnUrl?window.location=n.ReturnUrl:window.location.href=t),i.is(":visible")&&(i.hide(),$("#signInDrop").removeClass("waitcursor"))):(loginViewModel.StatusMessage(n.Message),$("#invalidLoginDrop").show(),i.is(":visible")&&(i.hide(),$("#signInDrop").removeClass("waitcursor")))},forgetPassword:function(){$("#loginDialog").modal("hide");$("#invalidEmail").hide();$("#forgotPasswordDialog").modal("show")},loadCurrentSubscription:function(){var n=this;ajaxRequest.makeAPIRequest("/Subscription/GetCurrentSubscriptions","GET",null,function(n){if(n.length>0){var t=n[0].SubscriptionId;loginViewModel.subscriptionId(t)}},null,null,!1,!1)},manageMOCPurchase:function(n){var t=opsgility.getBaseURL();window.location.href=t+"/Course/MOCPurchase/"+n}}